<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script>
    const nest = (items, id = null, link = 'parent_id') =>
    items
    .filter(item => item[link] === id)
    .map(item => ({ ...item, children: nest(items, item.id)}));
    const comments = [
        { id: 1, parent_id: null },
        { id: 2, parent_id: 1 },
        { id: 3, parent_id: 1 },
        { id: 4, parent_id: 2 },
        { id: 5, parent_id: 2 },
        { id: 6, parent_id: 1 },
        { id: 7, parent_id: 4 },
        { id: 8, parent_id: 6 },
    ];
    const nestedComments = nest(comments); // [{ id: 1, parent_id: null, children: [...] }]
    console.log(nestedComments)

    function nestes5(items,id,link){
        id = id || null;
        link = 'parent_id';
        let orginal = items;
        items = items.filter(function(item){
            return item[link] === id;
        })
        return items.map(function(item){
           return {...item,children: nestes5(orginal,item.id)}
        })
    }
    const nestedComments2 = nestes5(comments)
    console.log(nestedComments2)
</script>